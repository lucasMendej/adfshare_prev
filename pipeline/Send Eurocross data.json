{
	"name": "Send Eurocross data",
	"properties": {
		"description": "Procedure to get details of all transactions on which a sterngarant product is sold \nand mail that data to Eurocross\n\nprocedure uses apps72 to extract data from autoline and idas and logicapp PROD-LAPP-19-EUROCROSS to send data to email receiver",
		"activities": [
			{
				"name": "Get data from Autoline",
				"description": "fetch invoice transaction data from autoline set and store in temp_eurocrossTbl",
				"type": "Script",
				"dependsOn": [],
				"policy": {
					"timeout": "0.00:20:00",
					"retry": 0,
					"retryIntervalInSeconds": 30,
					"secureOutput": false,
					"secureInput": false
				},
				"userProperties": [],
				"linkedServiceName": {
					"referenceName": "DMS_PROD_SRV_APPS72",
					"type": "LinkedServiceReference"
				},
				"typeProperties": {
					"scripts": [
						{
							"type": "Query",
							"text": "USE [DMS]\n\nDECLARE\t@return_value int\n\nEXEC\t@return_value = [DMS].[dbo].[GetEuroCrossData]\n\t\t@stap = 1\n\nSELECT\t'Return Value' = @return_value\n"
						}
					],
					"scriptBlockExecutionTimeout": "02:00:00"
				}
			},
			{
				"name": "Get data from IDAS",
				"type": "Script",
				"dependsOn": [
					{
						"activity": "Get data from Autoline",
						"dependencyConditions": [
							"Succeeded"
						]
					}
				],
				"policy": {
					"timeout": "0.00:20:00",
					"retry": 0,
					"retryIntervalInSeconds": 30,
					"secureOutput": false,
					"secureInput": false
				},
				"userProperties": [],
				"linkedServiceName": {
					"referenceName": "DMS_PROD_SRV_APPS72",
					"type": "LinkedServiceReference"
				},
				"typeProperties": {
					"scripts": [
						{
							"type": "Query",
							"text": "USE [DMS]\n\nDECLARE\t@return_value int\n\nEXEC\t@return_value = [dbo].[GetEuroCrossData]\n\t\t@stap = 2\n\nSELECT\t'Return Value' = @return_value\n"
						}
					],
					"scriptBlockExecutionTimeout": "02:00:00"
				}
			},
			{
				"name": "Stap 3 en Send via logicapp",
				"description": "Logicapp PROD-LAPP-19-EUROCROSS-SEND-DATA\n\nold url : https://prod-112.westeurope.logic.azure.com:443/workflows/204b88a6204a4ce586f8520025ff08b9/triggers/manual/paths/invoke?api-version=2016-10-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=lYpacfOLdHMbx_CfcFPnpblyA-3ljL0vBcTmIp811ek\n10/2023 url : https://prod-217.westeurope.logic.azure.com:443/workflows/e70f133d62bb458ba05f22d54d1038e1/triggers/manual/paths/invoke?api-version=2016-10-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=yTtK-RYgLM_DhVf2Hk8dHlU3ltdylNdgocRyPvWD8-I",
				"type": "WebActivity",
				"dependsOn": [
					{
						"activity": "Get data from IDAS",
						"dependencyConditions": [
							"Succeeded"
						]
					}
				],
				"policy": {
					"timeout": "0.00:01:00",
					"retry": 0,
					"retryIntervalInSeconds": 30,
					"secureOutput": false,
					"secureInput": false
				},
				"userProperties": [],
				"typeProperties": {
					"method": "POST",
					"headers": {
						"Content-Type": "application/json"
					},
					"url": "https://prod-217.westeurope.logic.azure.com:443/workflows/e70f133d62bb458ba05f22d54d1038e1/triggers/manual/paths/invoke?api-version=2016-10-01&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=yTtK-RYgLM_DhVf2Hk8dHlU3ltdylNdgocRyPvWD8-I",
					"body": {
						"value": "@replace('{\"agent\":\"[ph]\"}','[ph]', pipeline().DataFactory)\n",
						"type": "Expression"
					}
				}
			}
		],
		"folder": {
			"name": "Eurocross"
		},
		"annotations": [],
		"lastPublishTime": "2024-11-21T15:05:48Z"
	},
	"type": "Microsoft.DataFactory/factories/pipelines"
}